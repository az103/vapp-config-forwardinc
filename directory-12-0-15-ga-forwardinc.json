{
   "apiVersion":"v1",
   "kind":"Template",
   "metadata":{
      "annotations":{
         "description":"CA Directory 12.0.15.ga ForwardInc"
      },
      "creationTimestamp":null,
      "name":"dir-12-0-15-ga-forwardinc",
      "namespace":"dir-12-0-15-ga"
   },
   "objects":[
      {
         "apiVersion":"v1",
         "kind":"ReplicationController",
         "metadata":{
            "name":"dxgrid-primary-rc",
            "namespace":"dir-12-0-15-ga",
            "labels":{
               "dxgrid":"primary"
            },
            "annotations":{
               "description":"dxgrid primary Replication Controller"
            }
         },
         "spec":{
            "replicas":1,
            "selector":{
               "dxgrid":"primary",
               "provides":"ldap"
            },
            "template":{
               "metadata":{
                  "name":"dxgrid-primary",
                  "namespace":"dir-12-0-15-ga",
                  "labels":{
                     "dxgrid":"primary",
                     "provides":"ldap"
                  },
                  "annotations":{
                     "description":"dxgrid primary Pod"
                  }
               },
               "spec":{
                  "restartPolicy":"Always",
                  "dnsPolicy":"ClusterFirst",
                  "volumes":[
                     {
                        "name":"dxgrid-configsvc",
                        "source":{
                           "emptyDir":{

                           }
                        }
                     }
                  ],
                  "containers":[
                     {
                        "name":"dxgrid-router",
                        "image":"store.vapp-security.solutions/directory/dxgrid:12.0.15.ga",
                        "env":[
                           {
                              "name":"CONFIG",
                              "value":"dxgrid-forwardinc/primary-router"
                           }
                        ],
                        "ports":[
                           {
                              "containerPort":1389
                           }
                        ],
                        "volumeMounts":[
                           {
                              "name":"dxgrid-configsvc",
                              "mountPath":"/solution"
                           }
                        ]
                     },
                     {
                        "name":"dxgrid-data",
                        "image":"store.vapp-security.solutions/directory/dxgrid:12.0.15.ga",
                        "env":[
                           {
                              "name":"CONFIG",
                              "value":"dxgrid-forwardinc/primary-data"
                           }
                        ],
                        "ports":[
                           {
                              "containerPort":2389
                           }
                        ],
                        "volumeMounts":[
                           {
                              "name":"dxgrid-configsvc",
                              "mountPath":"/solution"
                           }
                        ]
                     },
                     {
                        "name":"dxgrid-configsvc",
                        "image":"store.vapp-security.solutions/vapp/sidecar-configsvc:latest",
                        "env":[
                           {
                              "name":"SOURCE",
                              "value":"https://github.com/ca-directory/vapp-config-forwardinc/archive/12.0.15.ga.zip"
                           },
                           {
                              "name":"DESTINATION",
                              "value":"/solution"
                           }
                        ],
                        "volumeMounts":[
                           {
                              "name":"dxgrid-configsvc",
                              "mountPath":"/solution"
                           }
                        ]
                     }
                  ]
               }
            }
         }
      },
      {
         "apiVersion":"v1",
         "kind":"ReplicationController",
         "metadata":{
            "name":"dxgrid-secondary-rc",
            "namespace":"dir-12-0-15-ga",
            "labels":{
               "dxgrid":"secondary"
            },
            "annotations":{
               "description":"dxgrid secondary Replication Controller"
            }
         },
         "spec":{
            "replicas":1,
            "selector":{
               "dxgrid":"secondary",
               "provides":"ldap"
            },
            "template":{
               "metadata":{
                  "name":"dxgrid-secondary",
                  "namespace":"dir-12-0-15-ga",
                  "labels":{
                     "dxgrid":"secondary",
                     "provides":"ldap"
                  },
                  "annotations":{
                     "description":"dxgrid secondary Pod"
                  }
               },
               "spec":{
                  "restartPolicy":"Always",
                  "dnsPolicy":"ClusterFirst",
                  "volumes":[
                     {
                        "name":"dxgrid-configsvc",
                        "source":{
                           "emptyDir":{

                           }
                        }
                     }
                  ],
                  "containers":[
                     {
                        "name":"dxgrid-router",
                        "image":"store.vapp-security.solutions/directory/dxgrid:12.0.15.ga",
                        "env":[
                           {
                              "name":"CONFIG",
                              "value":"dxgrid-forwardinc/secondary-router"
                           }
                        ],
                        "ports":[
                           {
                              "containerPort":1389
                           }
                        ],
                        "volumeMounts":[
                           {
                              "name":"dxgrid-configsvc",
                              "mountPath":"/solution"
                           }
                        ]
                     },
                     {
                        "name":"dxgrid-data",
                        "image":"store.vapp-security.solutions/directory/dxgrid:12.0.15.ga",
                        "env":[
                           {
                              "name":"CONFIG",
                              "value":"dxgrid-forwardinc/secondary-data"
                           }
                        ],
                        "ports":[
                           {
                              "containerPort":2389
                           }
                        ],
                        "volumeMounts":[
                           {
                              "name":"dxgrid-configsvc",
                              "mountPath":"/solution"
                           }
                        ]
                     },
                     {
                        "name":"dxgrid-configsvc",
                        "image":"store.vapp-security.solutions/vapp/sidecar-configsvc:latest",
                        "env":[
                           {
                              "name":"SOURCE",
                              "value":"https://github.com/ca-directory/vapp-config-forwardinc/archive/12.0.15.ga.zip"
                           },
                           {
                              "name":"DESTINATION",
                              "value":"/solution"
                           }
                        ],
                        "volumeMounts":[
                           {
                              "name":"dxgrid-configsvc",
                              "mountPath":"/solution"
                           }
                        ]
                     }
                  ]
               }
            }
         }
      },
      {
         "apiVersion":"v1",
         "kind":"ReplicationController",
         "metadata":{
            "name":"dxgrid-discovery",
            "namespace":"dir-12-0-15-ga",
            "labels":{
               "ca.com/dir-12-0-15-ga":"2015-04-21"
            },
            "annotations":{
               "description":"dxgrid Discovery Replication Controller"
            }
         },
         "spec":{
            "replicas":1,
            "selector":{
               "ca.com/dir-12-0-15-ga":"2015-04-21",
               "discovery":"bootstrap"
            },
            "template":{
               "metadata":{
                  "name":"dxgrid-discovery",
                  "namespace":"dir-12-0-15-ga",
                  "labels":{
                     "ca.com/dir-12-0-15-ga":"2015-04-21",
                     "discovery":"bootstrap"
                  },
                  "annotations":{
                     "description":"dxgrid Discovery Pod"
                  }
               },
               "spec":{
                  "restartPolicy":"Always",
                  "dnsPolicy":"ClusterFirst",
                  "containers":[
                     {
                        "name":"dxgrid-bootstrap",
                        "image":"quay.io/coreos/etcd:v2.0.10",
                        "env":[
                           {
                              "name":"ETCD_ADDR",
                              "value":"0.0.0.0:2379"
                           },
                           {
                              "name":"ETCD_NAME",
                              "value":"dxgrid-bootstrap"
                           }
                        ],
                        "ports":[
                           {
                              "containerPort":2379
                           }
                        ]
                     }
                  ]
               }
            }
         }
      },
      {
         "apiVersion":"v1",
         "kind":"Service",
         "metadata":{
            "name":"ldap",
            "namespace":"dir-12-0-15-ga",
            "annotations":{
               "description":"Public service to CA Directory",
               "ca.com/cluster-public-url":"/jxweb/ConnectPageServlet?host=ldap.${SOLUTION_NAMESPACE}.cluster.local&port=389&baseDN=dc=forwardinc,dc=ca",
               "ca.com/cluster-public-urltext":"Browse"
            },
            "labels":{
               "ca.com/cluster-public-service":"tcp"
            }
         },
         "spec":{
            "ports":[
               {
                  "port":389,
                  "targetPort":1389
               }
            ],
            "sessionAffinity":"ClientIP",
            "selector":{
               "provides":"ldap"
            }
         }
      },
      {
         "apiVersion":"v1",
         "kind":"Service",
         "metadata":{
            "name":"dxgrid-discovery",
            "namespace":"dir-12-0-15-ga",
            "annotations":{
               "description":"Private service to CA Directory discovery"
            },
            "labels":{
               "ca.com/dir-12-0-15-ga":"2015-04-21"
            }
         },
         "spec":{
            "ports":[
               {
                  "port":2379,
                  "targetPort":2379
               }
            ],
            "selector":{
               "ca.com/dir-12-0-15-ga":"2015-04-21",
               "discovery":"bootstrap"
            }
         }
      }
   ]
}
